<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>CyberWatch Pro - Dashboard</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rss-parser/3.12.0/rss-parser.min.js"></script>
    <style>
        :root { --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --accent: #38bdf8; --success: #22c55e; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); padding: 20px; line-height: 1.6; }
        .container { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px; }
        .card { background: var(--card); border-radius: 12px; padding: 20px; border: 1px solid #334155; display: flex; flex-direction: column; }
        h2 { color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 10px; font-size: 1.1rem; margin-top: 0; }
        .item { margin-bottom: 12px; padding: 10px; background: #2d3748; border-radius: 6px; border-left: 4px solid var(--accent); font-size: 0.85rem; }
        a { color: #61dafb; text-decoration: none; font-weight: bold; }
        .checklist { list-style: none; padding: 0; }
        .checklist li { margin-bottom: 10px; font-size: 0.9rem; display: flex; align-items: center; }
        input[type="checkbox"] { margin-right: 10px; accent-color: var(--success); }
        .btn { background: #38bdf8; color: #0f172a; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; font-weight: bold; margin-top: 10px; }
        .loader { color: #94a3b8; font-style: italic; }
    </style>
</head>
<body>

<h1 style="text-align:center; margin-bottom: 30px;">üõ°Ô∏è Mon Dashboard Cyber S√©curit√©</h1>

<div class="container">
    <div class="card">
        <h2>üá´üá∑ Alertes CERT-FR (ANSSI)</h2>
        <div id="anssi-feed" class="loader">Connexion au flux ANSSI...</div>
    </div>

    <div class="card">
        <h2>üíª Failles Microsoft (CERT-IST)</h2>
        <div id="ms-feed" class="loader">Filtrage des failles en cours...</div>
    </div>

    <div class="card">
        <h2>‚úÖ Checklist Quotidienne</h2>
        <ul class="checklist">
            <li><input type="checkbox"> V√©rifier Windows Update</li>
            <li><input type="checkbox"> Scanner les mails douteux</li>
            <li><input type="checkbox"> V√©rifier les alertes ANSSI du jour</li>
            <li><input type="checkbox"> Sauvegarde fichiers critiques</li>
        </ul>
        <hr style="border: 0.5px solid #334155; margin: 15px 0;">
        <h2>üîç Outils Rapides</h2>
        <button class="btn" onclick="window.open('https://www.virustotal.com')">VirusTotal</button>
        <button class="btn" onclick="window.open('https://www.cybermalveillance.gouv.fr/')">Besoin d'aide ?</button>
    </div>
</div>

<script>
    const parser = new RSSParser();
    // On utilise un proxy plus performant pour GitHub Pages
    const PROXY = "https://api.allorigins.win/get?url=";

    async function fetchRSS(url, containerId, filter = "") {
        const container = document.getElementById(containerId);
        try {
            const response = await fetch(PROXY + encodeURIComponent(url));
            if (!response.ok) throw new Error('Erreur r√©seau');
            const json = await response.json();
            const feed = await parser.parseString(json.contents);
            
            container.innerHTML = "";
            let count = 0;
            feed.items.forEach(item => {
                if (count < 6 && (filter === "" || item.title.toLowerCase().includes(filter.toLowerCase()))) {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.innerHTML = `<a href="${item.link}" target="_blank">${item.title}</a><br><small>üìÖ ${new Date(item.pubDate).toLocaleDateString()}</small>`;
                    container.appendChild(div);
                    count++;
                }
            });
        } catch (err) {
            container.innerHTML = "<p style='color:#ef4444'>‚ö†Ô∏è √âchec du chargement. Si vous voyez ceci sur GitHub, attendez 1 minute et rafra√Æchissez.</p>";
        }
    }

    // Lancement des flux
    fetchRSS("https://www.cert.ssi.gouv.fr/feed/", "anssi-feed");
    fetchRSS("https://www.cert-ist.com/monespace/fluxrss", "ms-feed", "Microsoft");
</script>

</body>
</html>
